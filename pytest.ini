[pytest]
addopts =
    --color=yes
    --cov=src
    --cov-branch
    --cov-fail-under=80
    --cov-report=json:coverage.json
    --cov-report=term:skip-covered
    --ignore=main.py
    --show-capture=log
    --tb=short

    # Intentionally aggressive global timeout (1 second).
    # Policy: tests must be fast; if a test hits this timeout, refactor the test/system under test.
    # Do not "fix" by raising the global timeout without justification.
    --timeout=1

log_cli = false
log_cli_level = INFO
log_date_format = %Y-%m-%d %H:%M:%S
log_format = %(asctime)s [%(levelname)s] %(message)s

markers =
    slow: legitimately slower tests (must justify)

python_files = test_*.py
python_classes = Test*
python_functions = test_*

pythonpath = src

testpaths =
    ./tests

timeout_method = thread
